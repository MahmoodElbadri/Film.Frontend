<div class="container py-4">
  <header class="mb-5">
    <h1 class="text-gradient">Movie Dashboard</h1>
    <p class="text-muted">Analytics and insights about your movie collection</p>
  </header>

  <!-- Statistics Cards -->
  <div class="row mb-5">
    <!-- Total Movies -->
    <div class="col-md-4 mb-4">
      <div class="card card-glass card-hover text-center h-100">
        <div class="card-body p-4">
          <div class="mb-3">
            <span class="display-4 text-gradient">üé¨</span>
          </div>
          <h2 class="card-title mb-2">{{moviesNumber}}</h2>
          <p class="card-text text-muted mb-0">Number of movies</p>
          <p class="text-muted small">Total Movies</p>
        </div>
      </div>
    </div>

    <!-- Comedy Movies -->
    <div class="col-md-4 mb-4">
      <div class="card card-glass card-hover text-center h-100">
        <div class="card-body p-4">
          <div class="mb-3">
            <span class="display-4 text-gradient">üòÇ</span>
          </div>
          <h2 class="card-title mb-2">{{comedyMoviesNumber}}</h2>
          <p class="card-text text-muted mb-0">Comedy Movies</p>
          <p class="text-muted small">Comedy Movies</p>
        </div>
      </div>
    </div>

    <!-- Action Movies -->
    <div class="col-md-4 mb-4">
      <div class="card card-glass card-hover text-center h-100">
        <div class="card-body p-4">
          <div class="mb-3">
            <span class="display-4 text-gradient">üí•</span>
          </div>
          <h2 class="card-title mb-2">{{actionMoviesNumber}}</h2>
          <p class="card-text text-muted mb-0">Action Movies</p>
          <p class="text-muted small">Action Movies</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts & Latest Movies -->
  <div class="row mb-5">
    <!-- Pie Chart -->
    <div class="col-lg-7 mb-4">
      <div class="card card-glass card-hover h-100">
        <div class="card-header bg-transparent border-bottom">
          <h4 class="mb-0 text-gradient">Movies By Genre Chart</h4>
          <p class="text-muted mb-0">Number of movies in each genre</p>
        </div>
        <div class="card-body d-flex align-items-center justify-content-center">
          <ngx-charts-pie-chart
            [view]="view"
            [results]="saleData"
            [gradient]="gradient"
            [legend]="showLegend"
            [labels]="showLabels"
            [doughnut]="isDoughnut"
            [animations]="false">
<!--            [scheme]="{-->
<!--              domain: ['var(&#45;&#45;primary-500)', 'var(&#45;&#45;secondary-500)', 'var(&#45;&#45;warning)']-->
<!--            }"-->
<!--          >-->
          </ngx-charts-pie-chart>
        </div>
      </div>
    </div>

    <!-- Latest Movies -->
    <div class="col-lg-5 mb-4">
      <div class="card card-glass card-hover h-100">
        <div class="card-header bg-transparent border-bottom">
          <h4 class="mb-0 text-gradient">Top 5 Latest Movies</h4>
          <p class="text-muted mb-0">Latest movies added</p>
        </div>
        <div class="card-body p-0">
          @if (last5Added && last5Added.length > 0) {
            <div class="list-group list-group-flush">
              @for (movie of last5Added; track movie.id) {
                <div class="list-group-item list-group-item-action d-flex align-items-center hover-lift p-3">
                  <div class="me-3">
                    <div class="card-img-container aspect-ratio-1-1" style="width: 60px;">
                      <img [src]="movie.posterUrl"
                           [alt]="movie.title"
                           class="card-img rounded"
                           onerror="this.src='https://via.placeholder.com/60x60?text=No+Image'">
                    </div>
                  </div>
                  <div class="flex-grow-1">
                    <h6 class="mb-1">{{movie.title}}</h6>
                    <div class="d-flex align-items-center">
                      <span class="badge bg-primary me-2">{{movie.genre}}</span>
                      <small class="text-muted">{{movie.releaseDate | date: 'shortDate'}}</small>
                    </div>
                  </div>
                  <a [routerLink]="['/movies/details/', movie.id]"
                     class="btn btn-sm btn-outline-primary ms-2">
                    Show Details
                  </a>
                </div>
              }
            </div>
          } @else {
            <div class="text-center py-5">
              <span class="text-3xl text-muted mb-3">üìΩÔ∏è</span>
              <p class="text-muted">No movies added yet</p>
            </div>
          }
        </div>
      </div>
    </div>
  </div>

  <!-- Genre Distribution Details -->
  <div class="row">
    <div class="col-12">
      <div class="card card-glass card-hover">
        <div class="card-header bg-transparent border-bottom">
          <h4 class="mb-0 text-gradient">Genre Distribution</h4>
        </div>
        <div class="card-body">
          <div class="row">
            <!-- Comedy Progress -->
            <div class="col-md-4 mb-3">
              <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Comedy</span>
                <span class="font-bold">{{comedyMoviesNumber}} movies</span>
              </div>
              <div class="progress">
                <div class="progress-bar bg-primary"
                     [style.width.%]="(comedyMoviesNumber / moviesNumber) * 100">
                </div>
              </div>
            </div>

            <!-- Action Progress -->
            <div class="col-md-4 mb-3">
              <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Action</span>
                <span class="font-bold">{{actionMoviesNumber}} movies</span>
              </div>
              <div class="progress">
                <div class="progress-bar bg-secondary"
                     [style.width.%]="(actionMoviesNumber / moviesNumber) * 100">
                </div>
              </div>
            </div>

            <!-- Drama Progress -->
            <div class="col-md-4 mb-3">
              <div class="d-flex justify-content-between mb-2">
                <span class="text-muted">Drama</span>
                <span class="font-bold">{{dramaMoviesNumber}} movies</span>
              </div>
              <div class="progress">
                <div class="progress-bar bg-warning"
                     [style.width.%]="(dramaMoviesNumber / moviesNumber) * 100">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
