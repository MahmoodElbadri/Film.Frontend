<div class="container">
  <div class="header mt-3">
    @if(isAdd){
      <h1>Add Film</h1>
    } @else {
      <h1>Update Film</h1>
    }
  </div>
  <div class="body">
    <form [formGroup]="addMovieForm" (ngSubmit)="onSubmit(addMovieForm.value)">
      <div class="form-group mt-3">
        <label for="title" class="form-label">Title</label>
        <input
          formControlName="title"
          class="form-control"
          id="title"
          placeholder="Please enter Title"
          type="text"
          [value]="upsertMovie.title"
        >
        @if(addMovieForm.get('title')?.invalid && addMovieForm.get('title')?.touched){
        <div class="text-danger">
          Please enter a valid title
        </div>
      }
      </div>

      <div class="form-group mt-3">
        <label for="description" class="form-label">Description</label>
        <input
          formControlName="description"
          class="form-control"
          id="description"
          placeholder="Please enter Description"
          type="text"
          [value]="upsertMovie.description"
        >
        @if(addMovieForm.get('description')?.invalid && addMovieForm.get('description')?.touched){
        <div class="text-danger">
          Please enter a valid Description
        </div>
      }
      </div>

      <div class="form-group mt-3">
        <label for="releaseDate" class="form-label">Release Date</label>
        <input
          formControlName="releaseDate"
          class="form-control"
          id="releaseDate"
          placeholder="Please enter Release Date YYYY-MM-DD"
          type="date"
          [value]="upsertMovie.releaseDate"
        >
        @if(addMovieForm.get('releaseDate')?.invalid && addMovieForm.get('releaseDate')?.touched){
        <div class="text-danger">
          Please enter a valid Release Date YYYY-MM-DD  <!--'^(?:19|20)[0-9][0-9]-(?:(?:0[1-9]|1[0-2][0-9]|(?:(?!02)(?:0[1-9]|1[0-2][0-9]|2[0-8][0-9]))-(?:0[1-9]|1[0-2][0-9]|2[0-3][0-1])$'-->
        </div>
      }
      </div>

      <div class="form-group mt-3">
        <label for="genre" class="form-label">Genre</label>
        <input
          formControlName="genre"
          class="form-control"
          id="genre"
          placeholder="Please enter Genre"
          type="text"
          [value]="upsertMovie.genre"
        >
        @if(addMovieForm.get('genre')?.invalid && addMovieForm.get('genre')?.touched){
        <div class="text-danger">
          Please enter a valid Genre
        </div>
      }
      </div>

      <div class="form-group mt-3">
        <label for="posterUrl" class="form-label">Poster Url</label>
        <input
          formControlName="posterUrl"
          class="form-control"
          id="posterUrl"
          placeholder="Please enter Poster Url"
          type="text"
          [value]="upsertMovie.posterUrl"
        >
        @if(addMovieForm.get('posterUrl')?.invalid && addMovieForm.get('posterUrl')?.touched){
        <div class="text-danger">
          Please enter a valid Poster Url
        </div>
      }
      </div>
      @if(addMovieForm.get('posterUrl')?.value && addMovieForm.get('posterUrl')?.valid){
      <div class="mt-3">
        <label for="imagePreview" class="form-label">Image Preview</label>
        <img id="imagePreview"
             [src]="addMovieForm.get('posterUrl')?.value"
             alt="imagePreview"
             class="form-control"
             width="25"
             height="500">
      </div>
      }

      <div class="button-group col-12 mt-3">
        <button
          type="submit"
          class="btn btn-primary col-6"
          [disabled]="addMovieForm.invalid"
        >
          Submit
        </button>
        <a [routerLink]="['/']" type="button" class="btn btn-danger col-6">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
